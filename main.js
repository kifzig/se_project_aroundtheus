!function(){"use strict";class e{constructor(e,t,s,i,r,n){let{name:o,link:a,owner:l,_id:c,likes:d}=e;this.name=o,this.link=a,this._ownerId=l._id,this._myID=n,this.imageID=c,this._likes=d,this._cardSelector=t,this._handleCardClick=s,this._handleDeleteCardPopup=i,this._handleLikeClick=r}_getData(){return{name:this.name,link:this.link,imageId:this.imageID,card:this}}_setEventListeners=()=>{this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeClick(this)})),this._myID===this._ownerId&&this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCardPopup(this)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._getData())}))};handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}isLiked(){return this._likes.some((e=>e._id===this._myID))}_fillCardTemplate(){const e=this._cardElement.querySelector(".card__image");e.src=this.link,e.alt=this.name,this._cardElement.id=this.imageID,this._cardElement.querySelector(".card__caption").textContent=this.name,this._myID!==this._ownerId&&this._cardElement.querySelector(".card__delete-button").remove(),this._renderLikes()}setLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this._cardElement.querySelector(".card__like-count").textContent=this._likes.length;const e=this._cardElement.querySelector(".card__like-button");this.isLiked()?e.classList.add("card__like-button_active"):e.classList.remove("card__like-button_active")}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._fillCardTemplate(),this._setEventListeners(),this._cardElement}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._removeEventListeners()}_handleClickClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};_removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleClickClose)}_setEventListeners(){this._popupElement.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}}document.querySelector(".profile__title"),document.querySelector(".profile__description");const s=document.querySelector(".profile__image_edit"),i=(document.querySelector(".modal__input_type_url"),document.querySelector(".modal__input_type_title")),r=document.querySelector(".modal__input_type_description"),n=(document.querySelector("#edit-profile-modal"),document.querySelector(".profile__edit-button")),o=(document.forms["edit-profile-form"],document.querySelector("#preview-image-modal"),document.querySelector(".modal__preview_caption")),a=document.querySelector(".modal__preview_image");class l extends t{constructor(e,t,s,i){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._buttonText=s,this._loadingButtonText=i,this._submitButton=this._popupElement.querySelector(".modal__button")}close(){this._popupForm.reset(),super.close(),this._popupElement.removeEventListener("submit",this._handleSubmit)}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._buttonText}_getInputValues(){const e={};return document.querySelectorAll(".modal__input").forEach((function(t){""!==t.value&&(e[t.name]=t.value)})),e}_handleSubmit=()=>{const e=this._getInputValues();this._handleFormSubmit(e)};_setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",this._handleSubmit)}}class c{constructor(e,t){let{items:s,renderer:i}=e;this._renderItems=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._renderItems.reverse().forEach(this._renderer)}addItem(e){this._container.prepend(e)}}const d=new class{constructor(e){this.baseUrl=e.baseUrl,this._headers=e.headers}_processResponse=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`);getInitialCards(){return fetch(`${this.baseUrl}/cards`,{headers:this._headers}).then(this._processResponse)}getImageInfo(e){return fetch(`${this.baseUrl}/cards/${e}`,{headers:this._headers}).then(this._processResponse)}getUserInfo(){return fetch(`${this.baseUrl}/users/me`,{headers:this._headers}).then(this._processResponse)}getInitialData(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}editProfile(e,t){return fetch(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._processResponse)}addImageToApi(e,t){return fetch(`${this.baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._processResponse)}removeImageFromAPI(e){return fetch(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}addLikeToAPI(e){return fetch(`${this.baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._processResponse)}removeLikeFromAPI(e){return fetch(`${this.baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}updateProfilePic(e){return fetch(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._processResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"dfa65752-2d8e-401e-8af5-014c787612d4","Content-Type":"application/json"}});let h;const _=new class{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._imgElement=document.querySelector(s)}getUserInfo(){const e={};return e.profileName=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setMyID(e){this.myID=e}getMyID(){return this.myID}setProfileImage(e){this._imgElement.src=e}getProfileImage(){return this._imgElement.src}}(".profile__title",".profile__description",".profile__image");d.getInitialData().then((e=>{let[t,s]=e;h=new c({items:t,renderer:e=>{const t=k(e,s._id);h.addItem(t)}},b),h.renderItems(),_.setUserInfo(s.name,s.about),_.setProfileImage(s.avatar)})).catch((e=>{console.error(e)}));const u={};var m;m={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(m.formSelector)).forEach((e=>{const t=new class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}enableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}disableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}toggleButtonState(){this.hasInvalidInput()?this.enableButton():this.disableButton()}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}resetFormValidation(){this.toggleButtonState(),this._form.addEventListener("reset",(e=>{this.disableButton()}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(m,e),s=e.getAttribute("name");u[s]=t,t.enableValidation()}));const p=new l("#change-profile-pic-modal",(function(e){p.showLoading(),d.updateProfilePic(e.profilepicurl).then((t=>{_.setProfileImage(e.profilepicurl),p.close()})).catch((e=>{console.log(e)})).finally((()=>{p.hideLoading()}))}),"Save","Saving...");s.addEventListener("click",(function(){u["change-profile-pic-form"].toggleButtonState(),p.open()}));const f=new l("#edit-profile-modal",(function(e){let{title:t,description:s}=e;f.showLoading(),d.editProfile(t,s).then((e=>{_.setUserInfo(t,s),f.close()})).catch((e=>{console.error(e)})).finally((()=>{f.hideLoading()}))}),"Save","Saving...");n.addEventListener("click",(function(){const{profileName:e,description:t}=_.getUserInfo();i.value=e,r.value=t,u["edit-profile-form"].toggleButtonState(),f.open()}));const g=document.querySelector(".profile__add-button"),E=new l("#add-modal",(function(e){let{place:t,url:s}=e;E.showLoading(),d.addImageToApi(t,s).then((e=>{const t=k(e,e.owner._id);h.addItem(t),E.close()})).catch((e=>{console.log(e)})).finally((()=>{E.hideLoading()}))}),"Create","Creating...");g.addEventListener("click",(function(){u["add-image-form"].toggleButtonState(),E.open()}));const v=new class extends t{constructor(e){super({popupSelector:e})}open(e){let{name:t,link:s}=e;super.open(),o.textContent=t,a.src=s,a.alt=t}}("#preview-image-modal"),S=new class extends l{constructor(e,t,s,i){super(e,t,s,i)}open(e){super.open(),this.data=e}setSubmitAction(e){this._handleFormSubmit=e}_handleSubmit=()=>{const e=this.data;this._handleFormSubmit(e)}}("#confirm-modal",(function(e){S.showLoading(),d.removeImageFromAPI(e.imageID).then((t=>{e.handleDeleteCard(),S.close()})).catch((e=>{console.log(e)})).finally((()=>{S.hideLoading()}))}),"Yes","Deleting..."),b=".cards__list";function L(e){v.open(e)}function y(e){S.open(e)}function I(e){e.isLiked()?d.removeLikeFromAPI(e.imageID).then((t=>{e.setLikes(t.likes)})).catch((e=>{console.error(e)})):d.addLikeToAPI(e.imageID).then((t=>{e.setLikes(t.likes)})).catch((e=>{console.error(e)}))}function k(t,s){return new e(t,"#card__template",L,y,I,s).getView()}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkJnQixFQUFrQnpLLEtBQUt5SixFQUN6QixDQUVBLFNBQVNtQixFQUF1Qm5CLEdBQzlCaUIsRUFBd0IxSyxLQUFLeUosRUFDL0IsQ0FFQSxTQUFTNU0sRUFBZ0JrQixHQUNuQkEsRUFBS08sVUFDUDRFLEVBQ0dpQyxrQkFBa0JwSCxFQUFLUixTQUN2QnlHLE1BQU1SLElBQ0x6RixFQUFLaUIsU0FBU3dFLEVBQUlyRyxNQUFNLElBRXpCeUosT0FBT0csSUFDTkQsUUFBUUMsTUFBTUEsRUFBTSxJQUd4QjdELEVBQ0dnQyxhQUFhbkgsRUFBS1IsU0FDbEJ5RyxNQUFNUixJQUNMekYsRUFBS2lCLFNBQVN3RSxFQUFJckcsTUFBTSxJQUV6QnlKLE9BQU9HLElBQ05ELFFBQVFDLE1BQU1BLEVBQU0sR0FHNUIsQ0FFQSxTQUFTTCxFQUFXK0MsRUFBTW9CLEdBV3hCLE9BUmdCLElBQUl0TyxFQUNsQmtOLEVBRm1CLGtCQUluQjlNLEVBQ0FpTyxFQUNBL04sRUFDQWdPLEdBRWFqTCxTQUNqQixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBvd25lciwgX2lkLCBsaWtlcyB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZFBvcHVwLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxyXG4gICAgbXlJRFxyXG4gICkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9vd25lcklkID0gb3duZXIuX2lkO1xyXG4gICAgdGhpcy5fbXlJRCA9IG15SUQ7XHJcbiAgICB0aGlzLmltYWdlSUQgPSBfaWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZFBvcHVwID0gaGFuZGxlRGVsZXRlQ2FyZFBvcHVwO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldERhdGEoKSB7XHJcbiAgICBjb25zdCBjYXJkVG9QYXNzID0gdGhpcztcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgbGluazogdGhpcy5saW5rLFxyXG4gICAgICBpbWFnZUlkOiB0aGlzLmltYWdlSUQsXHJcbiAgICAgIGNhcmQ6IGNhcmRUb1Bhc3MsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAvLyBMaWtlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBEZWxldGUgYnV0dG9uXHJcbiAgICBpZiAodGhpcy5fbXlJRCA9PT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRQb3B1cCh0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGljayBvbiBpbWFnZSBmb3IgcHJldmlld1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2dldERhdGEoKSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX215SUQpO1xyXG4gIH1cclxuXHJcbiAgX2ZpbGxDYXJkVGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMubGluaztcclxuICAgIGltYWdlRWxlbWVudC5hbHQgPSB0aGlzLm5hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5pZCA9IHRoaXMuaW1hZ2VJRDtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NhcHRpb25cIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICBpZiAodGhpcy5fbXlJRCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIikucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIHNldExpa2VzKG51bU9mTGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbnVtT2ZMaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgY2FyZExpa2VCdXR0b24gPVxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIC8vIFRvZ2dsZXMgdGhlIGhlYXJ0XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICAvL0NvcHkgdGhlIHRlbXBsYXRlIGFuZCBnZXQgdGhlIGNhcmQgaHRtbFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIC8vIEZpbGwgaW4gdGhlIHRlbXBsYXRlIHdpdGggaW1hZ2UgYW5kIG5hbWVcclxuICAgIHRoaXMuX2ZpbGxDYXJkVGVtcGxhdGUoKTtcclxuXHJcbiAgICAvLyBzZXQgZXZlbnQgbGlzdGVuZXJzLFxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgLy8gb3BlbnMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgKVxyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgIFZBTElEQVRPUlMgU2V0dGluZ3MgZm9yIGZvcm1zICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbn07XHJcblxyXG4vLyBGb3JtIEZpZWxkcyBmaWxsZWQgaW4gd2l0aCBpbmZvcm1hdGlvbiBmcm9tIHByb2ZpbGUgcGFnZVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlU2VsZWN0b3IgPSBcIi5wcm9maWxlX190aXRsZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gQ2hhbmdlIFByb2ZpbGUgUGljdHVyZSBGb3JtIE1vZGFsIEVsZW1lbnRcclxuZXhwb3J0IGNvbnN0IGNoYW5nZVByb2ZpbGVQaWNNb2RhbFNlbGVjdG9yID0gXCIjY2hhbmdlLXByb2ZpbGUtcGljLW1vZGFsXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlX2VkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCJcclxuKTtcclxuXHJcbi8vIElucHV0IGZvciBFZGl0IFByb2ZpbGUgRm9ybSBNb2RhbFxyXG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBpbnB1dERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuXHJcbi8vIEVkaXQgUHJvZmlsZSBGb3JtIE1vZGFsIEVsZW1lbnRcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlTW9kYWxTZWxlY3RvciA9IFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5cclxuLy8gRWRpdCBQcm9maWxlIEJ1dHRvblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgaW5wdXRTZWxlY3RvciA9IFwiLm1vZGFsX19pbnB1dFwiO1xyXG5leHBvcnQgY29uc3QgbW9kYWxPcGVuU2VsZWN0b3IgPSBcIi5tb2RhbF9vcGVuZWRcIjtcclxuXHJcbi8vVXNlZCBpbiBDYXJkLmpzXHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlld19jYXB0aW9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlld19pbWFnZVwiKTtcclxuXHJcbi8vIFVzZWQgaW4gaW5kZXguanNcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDI2NjA0OTY2ODQ4LWQ3YWRhYzQwMmJmZj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMTcwJnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmlnIEJlbmRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjQ5MzY5ODc5MDQtMGVlMjZlODczMGVkP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTExNzAmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJKb3NodWEgVHJlZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU5Nzc3NzkzMzcwNC02MWJkZThiZDhlMDI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzY0JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR3JlYXQgU21va3kgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ2OTc1NTU5LTAyNmVlZDJlOTIxOT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJaaW9uIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDY2ODExMjk4NDUtYTZhYjNlMTAxN2UzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIktleSBXZXN0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjQ1NDUzNzMyOTMyLWJmMzZlYTlhZmM2ZT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MFwiLFxyXG4gIH0sXHJcbl07XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuaW1wb3J0IHsgaW5wdXRTZWxlY3RvciB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgYnV0dG9uVGV4dCwgbG9hZGluZ0J1dHRvblRleHQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTsgLy8gQ3JlYXRlcyBhIHBvcHVwIGVsZW1lbnRcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9idXR0b25UZXh0ID0gYnV0dG9uVGV4dDtcclxuICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vIENvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJuc1xyXG4gICAgLy8gdGhhdCBkYXRhIGFzIGFuIG9iamVjdFxyXG4gICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcclxuXHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgIGlucHV0T2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dE9iamVjdDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAvLyBpdGVtcyBzZXJ2ZXMgYXMgYW4gYXJyYXkgb2YgZGF0YVxyXG4gICAgLy8gcmVuZGVyZXIgaXMgZm9yIHJlbmRlcmluZyB0aGF0IGRhdGEgb24gdGhlIHBhZ2VcclxuICAgIC8vIGNvbnRhaW5lclNlbGVjdG9yIGlzIHdoZXJlIGNhcmQgZWxlbWVudHMgYXJlIGFkZGVkXHJcblxyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBtZXRob2QgbmFtZWQgcmVuZGVySXRlbXMoKVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgLy8gdGhpcy5fcmVuZGVySXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMucmV2ZXJzZSgpLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gcHVibGljIG1ldGhvZCBjYWxsZWQgYWRkSXRlbSgpIHRoYXQgdGFrZSBhIERPTSBlbGVtZW50IGFuZCBhZGRzIGl0IHRvIHRoZSBjb250YWluZXJcclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIGlucHV0VGl0bGUsXHJcbiAgaW5wdXREZXNjLFxyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlTW9kYWxTZWxlY3RvcixcclxuICBjaGFuZ2VQcm9maWxlUGljTW9kYWxTZWxlY3RvcixcclxuICBwcm9maWxlSW1hZ2UsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFQSSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZGZhNjU3NTItMmQ4ZS00MDFlLThhZjUtMDE0Yzc4NzYxMmQ0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmxldCBjYXJkTGlzdDtcclxubGV0IGNhcmRzO1xyXG5cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgXCIucHJvZmlsZV9faW1hZ2VcIlxyXG4pO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxEYXRhKClcclxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtLCB1c2VyRGF0YS5faWQpO1xyXG4gICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjYXJkTGlzdFNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcclxuICAgIHVzZXIuc2V0UHJvZmlsZUltYWdlKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbGlkYXRlIEFsbCBGb3JtcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIEVuYWJsZSB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXMgd2l0aCBtb2RhbF9fZm9ybSBjbGFzc1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIGhlcmUgeW91IGdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybVxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgLy8gaGVyZSB5b3Ugc3RvcmUgYSB2YWxpZGF0b3IgYnkgdGhlIGBuYW1lYCBvZiB0aGUgZm9ybVxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZSBQcm9maWxlIFBpYyBNb2RhbCAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBjaGFuZ2VQcm9maWxlUGljUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjaGFuZ2VQcm9maWxlUGljTW9kYWxTZWxlY3RvcixcclxuICBoYW5kbGVDaGFuZ2VQcm9maWxlUGljU3VibWl0LFxyXG4gIFwiU2F2ZVwiLFxyXG4gIFwiU2F2aW5nLi4uXCJcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZVByb2ZpbGVQaWNTdWJtaXQoZGF0YSkge1xyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5zaG93TG9hZGluZygpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVQaWMoZGF0YS5wcm9maWxlcGljdXJsKVxyXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHVzZXIuc2V0UHJvZmlsZUltYWdlKGRhdGEucHJvZmlsZXBpY3VybCk7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhpZGVMb2FkaW5nKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlT3BlbkNoYW5nZVByb2ZpbGVQaWNNb2RhbCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNoYW5nZS1wcm9maWxlLXBpYy1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuLy9Gb3IgaGFuZGxpbmcgb3BlbiBFZGl0IFByb2ZpbGUgYnV0dG9uXHJcbnByb2ZpbGVJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3BlbkNoYW5nZVByb2ZpbGVQaWNNb2RhbCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0IFByb2ZpbGUgTW9kYWwgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgZWRpdFByb2ZpbGVNb2RhbFNlbGVjdG9yLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxyXG4gIFwiU2F2ZVwiLFxyXG4gIFwiU2F2aW5nLi4uXCJcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICBwcm9maWxlUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5lZGl0UHJvZmlsZSh0aXRsZSwgZGVzY3JpcHRpb24pXHJcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgdXNlci5zZXRVc2VySW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pO1xyXG4gICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlUG9wdXAuaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPcGVuRWRpdFByb2ZpbGVNb2RhbCgpIHtcclxuICBjb25zdCB7IHByb2ZpbGVOYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0VGl0bGUudmFsdWUgPSBwcm9maWxlTmFtZTtcclxuICBpbnB1dERlc2MudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuLy9Gb3IgaGFuZGxpbmcgb3BlbiBFZGl0IFByb2ZpbGUgYnV0dG9uXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPcGVuRWRpdFByb2ZpbGVNb2RhbCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgSW1hZ2UgTW9kYWwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gRnVuY3Rpb25hbGl0eSBmb3IgT3BlbmluZyB0aGUgQWRkIEltYWdlIE1vZGFsXHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYWRkSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2FkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZEltYWdlU3VibWl0LFxyXG4gIFwiQ3JlYXRlXCIsXHJcbiAgXCJDcmVhdGluZy4uLlwiXHJcbik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRJbWFnZVN1Ym1pdCh7IHBsYWNlLCB1cmwgfSkge1xyXG4gIGFkZEltYWdlUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5hZGRJbWFnZVRvQXBpKHBsYWNlLCB1cmwpXHJcbiAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkLCBjYXJkLm93bmVyLl9pZCk7XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgIGFkZEltYWdlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZEltYWdlUG9wdXAuaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPcGVuQWRkSW1hZ2VNb2RhbCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1pbWFnZS1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgYWRkSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3BlbkFkZEltYWdlTW9kYWwpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZCBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcblxyXG5jb25zdCBkZWxldGVJbWFnZUNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXHJcbiAgXCIjY29uZmlybS1tb2RhbFwiLFxyXG4gIGhhbmRsZURlbGV0ZUltYWdlU3VibWl0LFxyXG4gIFwiWWVzXCIsXHJcbiAgXCJEZWxldGluZy4uLlwiXHJcbik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVJbWFnZVN1Ym1pdChjYXJkKSB7XHJcbiAgZGVsZXRlSW1hZ2VDb25maXJtUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuXHJcbiAgYXBpXHJcbiAgICAucmVtb3ZlSW1hZ2VGcm9tQVBJKGNhcmQuaW1hZ2VJRClcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICBkZWxldGVJbWFnZUNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZGVsZXRlSW1hZ2VDb25maXJtUG9wdXAuaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZHNfX2xpc3RcIjtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhkYXRhKSB7XHJcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlSW1hZ2VQb3B1cChkYXRhKSB7XHJcbiAgZGVsZXRlSW1hZ2VDb25maXJtUG9wdXAub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlTGlrZUZyb21BUEkoY2FyZC5pbWFnZUlEKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZExpa2VUb0FQSShjYXJkLmltYWdlSUQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEsIG15VXNlcklEKSB7XHJcbiAgLy9DcmVhdGVzIGEgY2FyZCBvYmplY3Qgd2l0aCBodG1sIHdpdGggZGF0YSB7XCJuYW1lXCIsIFwibGlua1wifVxyXG4gIGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmRfX3RlbXBsYXRlXCI7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUltYWdlUG9wdXAsXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXHJcbiAgICBteVVzZXJJRFxyXG4gICk7XHJcbiAgcmV0dXJuIG5ld0NhcmQuZ2V0VmlldygpO1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgLy9jb25zdHJ1Y3RvclxyXG4gICAgdGhpcy5iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9wcm9jZXNzUmVzcG9uc2UgPSAocmVzKSA9PiB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH07XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW1hZ2VJbmZvKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKGZ1bGxOYW1lLCBwcm9mZXNzaW9uKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBmdWxsTmFtZSxcclxuICAgICAgICBhYm91dDogcHJvZmVzc2lvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRJbWFnZVRvQXBpKHBsYWNlTmFtZSwgaW1nTGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBwbGFjZU5hbWUsXHJcbiAgICAgICAgbGluazogaW1nTGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVJbWFnZUZyb21BUEkoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2VUb0FQSShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZUZyb21BUEkoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVQaWMoaW1nTGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogaW1nTGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBpbWdTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWdTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIHJldHVybiBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHVzZXJcclxuICAgIC8vIGhhbmR5IGZvciB3aGVuIGl0J3MgbmVjZXNzYXJ5IHRvIGRpc3BsYXkgdXNlclxyXG4gICAgLy8gZGF0YSBpbiB0aGUgZm9ybVxyXG4gICAgY29uc3QgdXNlck9iamVjdCA9IHt9O1xyXG4gICAgdXNlck9iamVjdFtcInByb2ZpbGVOYW1lXCJdID0gdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICB1c2VyT2JqZWN0W1wiZGVzY3JpcHRpb25cIl0gPSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIHVzZXJPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lSW5mbywgam9iSW5mbykge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lSW5mbztcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0TXlJRChteUlEKSB7XHJcbiAgICB0aGlzLm15SUQgPSBteUlEO1xyXG4gIH1cclxuXHJcbiAgZ2V0TXlJRCgpIHtcclxuICAgIHJldHVybiB0aGlzLm15SUQ7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9maWxlSW1hZ2UoaW1nTGluaykge1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSBpbWdMaW5rO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUltYWdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ltZ0VsZW1lbnQuc3JjO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvL0JyaW5nIG92ZXIgZW5hYmxlQnV0dG9uIGFuZCBkaXNhYmxlQnV0dG9uXHJcbiAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmVuYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vQ2hlY2sgdGhpcyBwdWJsaWMgZnVuY3Rpb25cclxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBwcmV2aWV3Q2FwdGlvbiwgcHJldmlld0ltYWdlIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAvLyBDcmVhdGVzIGEgcG9wdXAgZWxlbWVudFxyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG5cclxuICAgIHByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwV2l0aEZvcm0ge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIGJ1dHRvblRleHQsIGxvYWRpbmdCdXR0b25UZXh0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCBidXR0b25UZXh0LCBsb2FkaW5nQnV0dG9uVGV4dCk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLmRhdGE7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZFBvcHVwIiwiaGFuZGxlTGlrZUNsaWNrIiwibXlJRCIsIm5hbWUiLCJsaW5rIiwib3duZXIiLCJfaWQiLCJsaWtlcyIsInRoaXMiLCJfb3duZXJJZCIsIl9teUlEIiwiaW1hZ2VJRCIsIl9saWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmRQb3B1cCIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfZ2V0RGF0YSIsImltYWdlSWQiLCJjYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVEZWxldGVDYXJkIiwicmVtb3ZlIiwiaXNMaWtlZCIsInNvbWUiLCJsaWtlIiwiX2ZpbGxDYXJkVGVtcGxhdGUiLCJpbWFnZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJpZCIsInRleHRDb250ZW50IiwiX3JlbmRlckxpa2VzIiwic2V0TGlrZXMiLCJudW1PZkxpa2VzIiwibGVuZ3RoIiwiY2FyZExpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJfaGFuZGxlTGlrZUljb24iLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJjbG9zZSIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvZmlsZUltYWdlIiwiaW5wdXRUaXRsZSIsImlucHV0RGVzYyIsImVkaXRQcm9maWxlQnV0dG9uIiwicHJldmlld0NhcHRpb24iLCJmb3JtcyIsInByZXZpZXdJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiYnV0dG9uVGV4dCIsImxvYWRpbmdCdXR0b25UZXh0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfYnV0dG9uVGV4dCIsIl9sb2FkaW5nQnV0dG9uVGV4dCIsIl9zdWJtaXRCdXR0b24iLCJyZXNldCIsIl9oYW5kbGVTdWJtaXQiLCJzaG93TG9hZGluZyIsImhpZGVMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmplY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVySXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfcHJvY2Vzc1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldEltYWdlSW5mbyIsImNhcmRJZCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbERhdGEiLCJhbGwiLCJlZGl0UHJvZmlsZSIsImZ1bGxOYW1lIiwicHJvZmVzc2lvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhZGRJbWFnZVRvQXBpIiwicGxhY2VOYW1lIiwiaW1nTGluayIsInJlbW92ZUltYWdlRnJvbUFQSSIsImFkZExpa2VUb0FQSSIsInJlbW92ZUxpa2VGcm9tQVBJIiwidXBkYXRlUHJvZmlsZVBpYyIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJjYXJkTGlzdCIsInVzZXIiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImltZ1NlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfaW1nRWxlbWVudCIsInVzZXJPYmplY3QiLCJzZXRVc2VySW5mbyIsIm5hbWVJbmZvIiwiam9iSW5mbyIsInNldE15SUQiLCJnZXRNeUlEIiwic2V0UHJvZmlsZUltYWdlIiwiZ2V0UHJvZmlsZUltYWdlIiwiY2FyZHMiLCJ1c2VyRGF0YSIsIml0ZW0iLCJjcmVhdGVDYXJkIiwiY2FyZExpc3RTZWxlY3RvciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImZvcm1TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJlbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsImRpc2FibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImUiLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjaGFuZ2VQcm9maWxlUGljUG9wdXAiLCJkYXRhIiwicHJvZmlsZXBpY3VybCIsInJlc3BvbnNlIiwibG9nIiwiZmluYWxseSIsInByb2ZpbGVQb3B1cCIsIl9yZWYyIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lIiwiYWRkQnV0dG9uIiwiYWRkSW1hZ2VQb3B1cCIsIl9yZWYzIiwicGxhY2UiLCJ1cmwiLCJuZXdDYXJkIiwicHJldmlld0ltYWdlUG9wdXAiLCJkZWxldGVJbWFnZUNvbmZpcm1Qb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImhhbmRsZURlbGV0ZUltYWdlUG9wdXAiLCJteVVzZXJJRCJdLCJzb3VyY2VSb290IjoiIn0=