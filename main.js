!function(){"use strict";class e{constructor(e,t,s){let{name:i,link:n}=e;this.name=i,this.link=n,this._cardSelector=t,this._handleCardClick=s}_getData(){return{name:this.name,link:this.link}}_setEventListeners=()=>{this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._getData())}))};_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_fillCardTemplate(){const e=this._cardElement.querySelector(".card__image");e.src=this.link,e.alt=this.name,this._cardElement.querySelector(".card__caption").textContent=this.name}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._fillCardTemplate(),this._setEventListeners(),this._cardElement}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._removeEventListeners()}_handleClickClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};_removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleClickClose)}_setEventListeners(){this._popupElement.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}}document.querySelector(".profile__title"),document.querySelector(".profile__description");const s=document.querySelector(".modal__input_type_title"),i=document.querySelector(".modal__input_type_description"),n=(document.querySelector("#edit-profile-modal"),document.querySelector(".profile__edit-button")),o=(document.forms["edit-profile-form"],document.querySelector("#preview-image-modal"),document.querySelector(".modal__preview_caption")),r=document.querySelector(".modal__preview_image");class l extends t{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form")}close(){this._popupForm.reset(),super.close(),this._popupElement.removeEventListener("submit",this._handleSubmit)}_getInputValues(){const e={};return document.querySelectorAll(".modal__input").forEach((function(t){""!==t.value&&(e[t.name]=t.value)})),e}_handleSubmit=()=>{const e=this._getInputValues();this._handleFormSubmit(e)};_setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",this._handleSubmit)}}const a={};var c;c={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(c.formSelector)).forEach((e=>{const t=new class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}enableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}disableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}toggleButtonState(){this.hasInvalidInput()?this.enableButton():this.disableButton()}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}resetFormValidation(){this.toggleButtonState(),this._form.addEventListener("reset",(e=>{this.disableButton()}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(c,e),s=e.getAttribute("name");a[s]=t,t.enableValidation()}));const d=new l("#edit-profile-modal",(function(e){let{title:t,description:s}=e;u.setUserInfo(t,s),d.close()})),u=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){const e={};return e.profileName=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(".profile__title",".profile__description");n.addEventListener("click",(function(){const{profileName:e,description:t}=u.getUserInfo();s.value=e,i.value=t,a["edit-profile-form"].toggleButtonState(),d.open()}));const m=document.querySelector(".profile__add-button"),_=new l("#add-modal",(function(e){let{place:t,url:s}=e;const i=f({name:t,link:s});E.addItem(i),_.close()}));m.addEventListener("click",(function(){a["add-image-form"].toggleButtonState(),_.open()}));const h=new class extends t{constructor(e){super({popupSelector:e})}open(e){let{name:t,link:s}=e;super.open(),o.textContent=t,r.src=s,r.alt=t}}("#preview-image-modal");function p(e){h.open(e)}function f(t){return new e(t,"#card__template",p).getView()}const E=new class{constructor(e,t){let{items:s,renderer:i}=e;this._renderItems=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._renderItems.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite",link:"https://images.unsplash.com/photo-1426604966848-d7adac402bff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"},{name:"Big Bend",link:"https://images.unsplash.com/photo-1524936987904-0ee26e8730ed?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"},{name:"Joshua Tree",link:"https://images.unsplash.com/photo-1597777933704-61bde8bd8e02?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80"},{name:"Great Smoky Mountains",link:"https://images.unsplash.com/photo-1546975559-026eed2e9219?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Zion National Park",link:"https://images.unsplash.com/photo-1606681129845-a6ab3e1017e3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Key West",link:"https://images.unsplash.com/photo-1645453732932-bf36ea9afc6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80"}],renderer:e=>{const t=f(e);E.addItem(t)}},".cards__list");E.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZixFQUFXYyxHQUN4QmIsRUFBU0MsUUFBUWEsRUFBSyxHQWxCSCxnQkF3QnpCZCxFQUFTVSxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldERhdGEoKSB7XHJcbiAgICBjb25zdCBkYXRhID0geyBuYW1lOiB0aGlzLm5hbWUsIGxpbms6IHRoaXMubGluayB9O1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAvLyBMaWtlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gRGVsZXRlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9nZXREYXRhKCkpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfZmlsbENhcmRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIC8vQ29weSB0aGUgdGVtcGxhdGUgYW5kIGdldCB0aGUgY2FyZCBodG1sXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgLy8gRmlsbCBpbiB0aGUgdGVtcGxhdGUgd2l0aCBpbWFnZSBhbmQgbmFtZVxyXG4gICAgdGhpcy5fZmlsbENhcmRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIC8vIHNldCBldmVudCBsaXN0ZW5lcnMsXHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICAvLyBvcGVucyBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApXHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgVkFMSURBVE9SUyBTZXR0aW5ncyBmb3IgZm9ybXMgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxufTtcclxuXHJcbi8vIEZvcm0gRmllbGRzIGZpbGxlZCBpbiB3aXRoIGluZm9ybWF0aW9uIGZyb20gcHJvZmlsZSBwYWdlXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX3RpdGxlXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY1NlbGVjdG9yID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG4vLyBJbnB1dCBmb3IgRWRpdCBQcm9maWxlIEZvcm0gTW9kYWxcclxuZXhwb3J0IGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgaW5wdXREZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXHJcbik7XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgRm9ybSBNb2RhbCBFbGVtZW50XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU1vZGFsU2VsZWN0b3IgPSBcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIjtcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcclxuXHJcbi8vIEVkaXQgUHJvZmlsZSBCdXR0b25cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IGlucHV0U2VsZWN0b3IgPSBcIi5tb2RhbF9faW5wdXRcIjtcclxuZXhwb3J0IGNvbnN0IG1vZGFsT3BlblNlbGVjdG9yID0gXCIubW9kYWxfb3BlbmVkXCI7XHJcblxyXG4vL1VzZWQgaW4gQ2FyZC5qc1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3Q2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXdfY2FwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXdfaW1hZ2VcIik7XHJcblxyXG4vLyBVc2VkIGluIGluZGV4LmpzXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQyNjYwNDk2Njg0OC1kN2FkYWM0MDJiZmY/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE3MCZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJpZyBCZW5kXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTI0OTM2OTg3OTA0LTBlZTI2ZTg3MzBlZD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMTcwJnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiSm9zaHVhIFRyZWVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTc3Nzc5MzM3MDQtNjFiZGU4YmQ4ZTAyP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc2NCZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdyZWF0IFNtb2t5IE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0Njk3NTU1OS0wMjZlZWQyZTkyMTk/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiWmlvbiBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjA2NjgxMTI5ODQ1LWE2YWIzZTEwMTdlMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJLZXkgV2VzdFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY0NTQ1MzczMjkzMi1iZjM2ZWE5YWZjNmU/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzM1JnE9ODBcIixcclxuICB9LFxyXG5dO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmltcG9ydCB7IGlucHV0U2VsZWN0b3IgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTsgLy8gQ3JlYXRlcyBhIHBvcHVwIGVsZW1lbnRcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvLyBDb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnNcclxuICAgIC8vIHRoYXQgZGF0YSBhcyBhbiBvYmplY3RcclxuICAgIGNvbnN0IGlucHV0T2JqZWN0ID0ge307XHJcblxyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICBpZiAoaW5wdXQudmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzYyxcclxuICBpbnB1dFRpdGxlLFxyXG4gIGlucHV0RGVzYyxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZWRpdFByb2ZpbGVNb2RhbFNlbGVjdG9yLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWxpZGF0ZSBBbGwgRm9ybXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBFbmFibGUgdmFsaWRhdGlvbiBmb3IgYWxsIGZvcm1zIHdpdGggbW9kYWxfX2Zvcm0gY2xhc3NcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICAvLyBoZXJlIHlvdSBnZXQgdGhlIG5hbWUgb2YgdGhlIGZvcm1cclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICAgIC8vIGhlcmUgeW91IHN0b3JlIGEgdmFsaWRhdG9yIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGZvcm1cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0IFByb2ZpbGUgTW9kYWwgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgZWRpdFByb2ZpbGVNb2RhbFNlbGVjdG9yLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gIHVzZXIuc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlT3BlbkVkaXRQcm9maWxlTW9kYWwoKSB7XHJcbiAgY29uc3QgeyBwcm9maWxlTmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dFRpdGxlLnZhbHVlID0gcHJvZmlsZU5hbWU7XHJcbiAgaW5wdXREZXNjLnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbi8vRm9yIGhhbmRsaW5nIG9wZW4gRWRpdCBQcm9maWxlIGJ1dHRvblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3BlbkVkaXRQcm9maWxlTW9kYWwpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkIEltYWdlIE1vZGFsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIEZ1bmN0aW9uYWxpdHkgZm9yIE9wZW5pbmcgdGhlIEFkZCBJbWFnZSBNb2RhbFxyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtbW9kYWxcIiwgaGFuZGxlQWRkSW1hZ2VTdWJtaXQpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkSW1hZ2VTdWJtaXQoeyBwbGFjZSwgdXJsIH0pIHtcclxuICBjb25zdCBuZXdDYXJkRGF0YSA9IHsgbmFtZTogcGxhY2UsIGxpbms6IHVybCB9O1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKG5ld0NhcmREYXRhKTtcclxuICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gIGFkZEltYWdlUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlT3BlbkFkZEltYWdlTW9kYWwoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtaW1hZ2UtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIGFkZEltYWdlUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU9wZW5BZGRJbWFnZU1vZGFsKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZHNfX2xpc3RcIjtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhkYXRhKSB7XHJcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgLy9DcmVhdGVzIGEgY2FyZCBvYmplY3Qgd2l0aCBodG1sIHdpdGggZGF0YSB7XCJuYW1lXCIsIFwibGlua1wifVxyXG4gIGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmRfX3RlbXBsYXRlXCI7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICByZXR1cm4gbmV3Q2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkTGlzdFNlbGVjdG9yXHJcbik7XHJcblxyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvL0JyaW5nIG92ZXIgZW5hYmxlQnV0dG9uIGFuZCBkaXNhYmxlQnV0dG9uXHJcbiAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmVuYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vQ2hlY2sgdGhpcyBwdWJsaWMgZnVuY3Rpb25cclxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgLy8gcmV0dXJuIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdXNlclxyXG4gICAgLy8gaGFuZHkgZm9yIHdoZW4gaXQncyBuZWNlc3NhcnkgdG8gZGlzcGxheSB1c2VyXHJcbiAgICAvLyBkYXRhIGluIHRoZSBmb3JtXHJcbiAgICBjb25zdCB1c2VyT2JqZWN0ID0ge307XHJcbiAgICB1c2VyT2JqZWN0W1wicHJvZmlsZU5hbWVcIl0gPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudDtcclxuICAgIHVzZXJPYmplY3RbXCJkZXNjcmlwdGlvblwiXSA9IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICByZXR1cm4gdXNlck9iamVjdDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWVJbmZvLCBqb2JJbmZvKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVJbmZvO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYkluZm87XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBwcmV2aWV3Q2FwdGlvbiwgcHJldmlld0ltYWdlIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAvLyBDcmVhdGVzIGEgcG9wdXAgZWxlbWVudFxyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG5cclxuICAgIHByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAvLyBpdGVtcyBzZXJ2ZXMgYXMgYW4gYXJyYXkgb2YgZGF0YVxyXG4gICAgLy8gcmVuZGVyZXIgaXMgZm9yIHJlbmRlcmluZyB0aGF0IGRhdGEgb24gdGhlIHBhZ2VcclxuICAgIC8vIGNvbnRhaW5lclNlbGVjdG9yIGlzIHdoZXJlIGNhcmQgZWxlbWVudHMgYXJlIGFkZGVkXHJcblxyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBtZXRob2QgbmFtZWQgcmVuZGVySXRlbXMoKVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgLy8gdGhpcy5fcmVuZGVySXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgdGhpcy5fcmVuZGVySXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XHJcbiAgfVxyXG5cclxuICAvLyBwdWJsaWMgbWV0aG9kIGNhbGxlZCBhZGRJdGVtKCkgdGhhdCB0YWtlIGEgRE9NIGVsZW1lbnQgYW5kIGFkZHMgaXQgdG8gdGhlIGNvbnRhaW5lclxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0RGF0YSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfZmlsbENhcmRUZW1wbGF0ZSIsImltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiYWRkIiwiY2xvc2UiLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiX2hhbmRsZUVzY0Nsb3NlIiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlucHV0VGl0bGUiLCJpbnB1dERlc2MiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsInByZXZpZXdDYXB0aW9uIiwiZm9ybXMiLCJwcmV2aWV3SW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwicmVzZXQiLCJfaGFuZGxlU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmplY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JtU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJlbmFibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJkaXNhYmxlQnV0dG9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJlIiwicmVzZXRGb3JtVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwicHJvZmlsZVBvcHVwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVzZXIiLCJzZXRVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJPYmplY3QiLCJuYW1lSW5mbyIsImpvYkluZm8iLCJwcm9maWxlTmFtZSIsImFkZEJ1dHRvbiIsImFkZEltYWdlUG9wdXAiLCJfcmVmMiIsInBsYWNlIiwidXJsIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJwcmV2aWV3SW1hZ2VQb3B1cCIsImRhdGEiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVySXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJjYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==